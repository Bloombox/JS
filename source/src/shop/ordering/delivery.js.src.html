<!DOCTYPE html><html lang="en" class="loading"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>delivery.js</title><link href="../../../../dossier.css" rel="stylesheet" type="text/css"><script src="../../../../types.js" defer></script><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><nav class="dossier-nav"></nav><div class="content"><main data-page-data="[null,null,null,[&quot;delivery.js&quot;,&quot;src/shop/ordering/delivery.js&quot;,[null,&quot;/*&quot;,&quot; * Copyright 2018, Bloombox, LLC. All rights reserved.&quot;,&quot; *&quot;,&quot; * Source and object computer code contained herein is the private intellectual&quot;,&quot; * property of Bloombox, a California Limited Liability Corporation. Use of this&quot;,&quot; * code in source form requires permission in writing before use or the&quot;,&quot; * assembly, distribution, or publishing of derivative works, for commercial&quot;,&quot; * purposes or any other purpose, from a duly authorized officer of Momentum&quot;,&quot; * Ideas Co.&quot;,&quot; *&quot;,&quot; * Unless required by applicable law or agreed to in writing, software&quot;,&quot; * distributed under the License is distributed on an \&quot;AS IS\&quot; BASIS,&quot;,&quot; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&quot;,&quot; * See the License for the specific language governing permissions and&quot;,&quot; * limitations under the License.&quot;,&quot; */&quot;,null,&quot;/**&quot;,&quot; * Bloombox: Delivery&quot;,&quot; *&quot;,&quot; * @fileoverview Provides logic specific to delivery orders.&quot;,&quot; */&quot;,null,&quot;/*global goog */&quot;,null,&quot;goog.provide(&#39;bloombox.shop.order.DeliveryLocation&#39;);&quot;,&quot;goog.provide(&#39;bloombox.shop.order.DeliveryLocation.fromResponse&#39;);&quot;,null,&quot;goog.require(&#39;bloombox.identity.StreetAddress&#39;);&quot;,null,&quot;goog.require(&#39;proto.opencannabis.commerce.DeliveryDestination&#39;);&quot;,&quot;goog.require(&#39;proto.opencannabis.geo.Address&#39;);&quot;,null,null,&quot;// -- Delivery Location -- //&quot;,null,&quot;/**&quot;,&quot; * Specifies the location for a delivery.&quot;,&quot; *&quot;,&quot; * @param {bloombox.identity.StreetAddress} streetAddress Delivery address.&quot;,&quot; * @param {?string=} instructions Delivery instructions, if any.&quot;,&quot; * @constructor&quot;,&quot; * @export&quot;,&quot; */&quot;,&quot;bloombox.shop.order.DeliveryLocation = function DeliveryLocation(streetAddress,&quot;,&quot;                                                                 instructions) {&quot;,&quot;  /**&quot;,&quot;   * Street address for delivery.&quot;,&quot;   * @type {bloombox.identity.StreetAddress}&quot;,&quot;   */&quot;,&quot;  this.streetAddress = streetAddress;&quot;,null,&quot;  /**&quot;,&quot;   * Special instructions for delivery, if any.&quot;,&quot;   * @type {?string}&quot;,&quot;   */&quot;,&quot;  this.deliveryInstructions = instructions || null;&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Decode a delivery location from a raw proto object response.&quot;,&quot; *&quot;,&quot; * @param {?Object} protob Raw response object.&quot;,&quot; * @return {?bloombox.shop.order.DeliveryLocation} Decoded delivery location&quot;,&quot; *         object, or `null` if none could be decoded.&quot;,&quot; */&quot;,&quot;bloombox.shop.order.DeliveryLocation.fromResponse = function(protob) {&quot;,&quot;  if ((typeof protob === &#39;object&#39;) &amp;&amp;&quot;,&quot;      (typeof protob[&#39;destination&#39;] === &#39;object&#39;)) {&quot;,&quot;    // decode location&quot;,&quot;    let data = /** @type {Object} */ (protob[&#39;destination&#39;]);&quot;,&quot;    let address = /** @type {Object|undefined} */ (data[&#39;address&#39;]);&quot;,&quot;    let instructions = /** @type {string|null|undefined} */ (&quot;,&quot;      data[&#39;instructions&#39;]);&quot;,null,&quot;    if (typeof address === &#39;object&#39;) {&quot;,&quot;      // decode address&quot;,&quot;      let firstLine = /** @type {string|undefined|null} */ (&quot;,&quot;        address[&#39;firstLine&#39;]);&quot;,&quot;      let secondLine = /** @type {string|undefined|null} */ (&quot;,&quot;        address[&#39;secondLine&#39;]) || null;&quot;,&quot;      let city = /** @type {string|undefined|null} */ (&quot;,&quot;        address[&#39;city&#39;]);&quot;,&quot;      let state = /** @type {string|undefined|null} */ (&quot;,&quot;        address[&#39;state&#39;]);&quot;,&quot;      let zipcode = /** @type {string|undefined|null} */ (&quot;,&quot;        address[&#39;zipcode&#39;]);&quot;,null,&quot;      if (typeof firstLine === &#39;string&#39; &amp;&amp;&quot;,&quot;          typeof city === &#39;string&#39; &amp;&amp;&quot;,&quot;          typeof state === &#39;string&#39; &amp;&amp;&quot;,&quot;          typeof zipcode === &#39;string&#39;) {&quot;,&quot;        // we are good to go&quot;,&quot;        return new bloombox.shop.order.DeliveryLocation(&quot;,&quot;          new bloombox.identity.StreetAddress(&quot;,&quot;            firstLine,&quot;,&quot;            secondLine,&quot;,&quot;            city,&quot;,&quot;            state,&quot;,&quot;            zipcode),&quot;,&quot;          instructions);&quot;,&quot;      } else {&quot;,&quot;        // invalid address&quot;,&quot;        bloombox.logging.error(&quot;,&quot;          &#39;Failed to decode delivery address data.&#39;,&quot;,&quot;          {&#39;data&#39;: data, &#39;address&#39;: address});&quot;,&quot;      }&quot;,&quot;    }&quot;,&quot;  }&quot;,&quot;  return null;&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Export a proto that specifies this delivery location.&quot;,&quot; *&quot;,&quot; * @return {proto.opencannabis.commerce.DeliveryDestination} Exported proto.&quot;,&quot; * @public&quot;,&quot; */&quot;,&quot;bloombox.shop.order.DeliveryLocation.prototype.export = function() {&quot;,&quot;  let protobuf = new proto.opencannabis.commerce.DeliveryDestination();&quot;,&quot;  let address = new proto.opencannabis.geo.Address();&quot;,null,&quot;  address.setFirstLine(this.streetAddress.firstLine);&quot;,&quot;  if (this.streetAddress.secondLine !== null)&quot;,&quot;    address.setSecondLine(this.streetAddress.secondLine);&quot;,&quot;  address.setCity(this.streetAddress.city);&quot;,&quot;  address.setState(this.streetAddress.state);&quot;,&quot;  address.setZipcode(this.streetAddress.zip);&quot;,&quot;  protobuf.setAddress(address);&quot;,null,&quot;  if (this.deliveryInstructions !== null)&quot;,&quot;    protobuf.setInstructions(this.deliveryInstructions);&quot;,&quot;  return protobuf;&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Retrieve the street address associated with this delivery location.&quot;,&quot; *&quot;,&quot; * @return {bloombox.identity.StreetAddress} Delivery street address.&quot;,&quot; * @export&quot;,&quot; */&quot;,&quot;bloombox.shop.order.DeliveryLocation.prototype.getAddress = function() {&quot;,&quot;  return this.streetAddress;&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Set special delivery instructions.&quot;,&quot; * @param {string} ins Special instructions.&quot;,&quot; * @export&quot;,&quot; */&quot;,&quot;bloombox.shop.order.DeliveryLocation.prototype.setInstructions = function(ins) {&quot;,&quot;  this.deliveryInstructions = ins;&quot;,&quot;};&quot;,null,&quot;// noinspection JSUnusedGlobalSymbols&quot;,&quot;/**&quot;,&quot; * Clear any special delivery instructions.&quot;,&quot; * @export&quot;,&quot; */&quot;,&quot;bloombox.shop.order.DeliveryLocation.prototype.clearInstructions = function() {&quot;,&quot;  this.deliveryInstructions = null;&quot;,&quot;};&quot;]]]"></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><script src="../../../../dossier.js" defer></script>