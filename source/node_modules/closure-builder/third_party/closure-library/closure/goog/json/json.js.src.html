<!DOCTYPE html><html lang="en" class="loading"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>json.js</title><link href="../../../../../../../../dossier.css" rel="stylesheet" type="text/css"><script src="../../../../../../../../types.js" defer></script><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><nav class="dossier-nav"></nav><div class="content"><main data-page-data="[null,null,null,[&quot;json.js&quot;,&quot;node_modules/closure-builder/third_party/closure-library/closure/goog/json/json.js&quot;,[&quot;// Copyright 2006 The Closure Library Authors. All Rights Reserved.&quot;,&quot;//&quot;,&quot;// Licensed under the Apache License, Version 2.0 (the \&quot;License\&quot;);&quot;,&quot;// you may not use this file except in compliance with the License.&quot;,&quot;// You may obtain a copy of the License at&quot;,&quot;//&quot;,&quot;//      http://www.apache.org/licenses/LICENSE-2.0&quot;,&quot;//&quot;,&quot;// Unless required by applicable law or agreed to in writing, software&quot;,&quot;// distributed under the License is distributed on an \&quot;AS-IS\&quot; BASIS,&quot;,&quot;// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&quot;,&quot;// See the License for the specific language governing permissions and&quot;,&quot;// limitations under the License.&quot;,null,&quot;/**&quot;,&quot; * @fileoverview JSON utility functions.&quot;,&quot; * @author arv@google.com (Erik Arvidsson)&quot;,&quot; */&quot;,null,null,&quot;goog.provide(&#39;goog.json&#39;);&quot;,&quot;goog.provide(&#39;goog.json.Replacer&#39;);&quot;,&quot;goog.provide(&#39;goog.json.Reviver&#39;);&quot;,&quot;goog.provide(&#39;goog.json.Serializer&#39;);&quot;,null,null,&quot;/**&quot;,&quot; * @define {boolean} If true, use the native JSON parsing API.&quot;,&quot; * NOTE: The default {@code goog.json.parse} implementation is able to handle&quot;,&quot; * invalid JSON. JSPB used to produce invalid JSON which is not the case&quot;,&quot; * anymore so this is safe to enable for parsing JSPB. Using native JSON is&quot;,&quot; * faster and safer than the default implementation using {@code eval}.&quot;,&quot; */&quot;,&quot;goog.define(&#39;goog.json.USE_NATIVE_JSON&#39;, false);&quot;,null,&quot;/**&quot;,&quot; * @define {boolean} If true, try the native JSON parsing API first. If it&quot;,&quot; * fails, log an error and use {@code eval} instead. This is useful when&quot;,&quot; * transitioning to {@code goog.json.USE_NATIVE_JSON}. The error logger needs to&quot;,&quot; * be set by {@code goog.json.setErrorLogger}. If it is not set then the error&quot;,&quot; * is ignored.&quot;,&quot; */&quot;,&quot;goog.define(&#39;goog.json.TRY_NATIVE_JSON&#39;, false);&quot;,null,null,&quot;/**&quot;,&quot; * Tests if a string is an invalid JSON string. This only ensures that we are&quot;,&quot; * not using any invalid characters&quot;,&quot; * @param {string} s The string to test.&quot;,&quot; * @return {boolean} True if the input is a valid JSON string.&quot;,&quot; */&quot;,&quot;goog.json.isValid = function(s) {&quot;,&quot;  // All empty whitespace is not valid.&quot;,&quot;  if (/^\\s*$/.test(s)) {&quot;,&quot;    return false;&quot;,&quot;  }&quot;,null,&quot;  // This is taken from http://www.json.org/json2.js which is released to the&quot;,&quot;  // public domain.&quot;,&quot;  // Changes: We dissallow \\u2028 Line separator and \\u2029 Paragraph separator&quot;,&quot;  // inside strings.  We also treat \\u2028 and \\u2029 as whitespace which they&quot;,&quot;  // are in the RFC but IE and Safari does not match \\s to these so we need to&quot;,&quot;  // include them in the reg exps in all places where whitespace is allowed.&quot;,&quot;  // We allowed \\x7f inside strings because some tools don&#39;t escape it,&quot;,&quot;  // e.g. http://www.json.org/java/org/json/JSONObject.java&quot;,null,&quot;  // Parsing happens in three stages. In the first stage, we run the text&quot;,&quot;  // against regular expressions that look for non-JSON patterns. We are&quot;,&quot;  // especially concerned with &#39;()&#39; and &#39;new&#39; because they can cause invocation,&quot;,&quot;  // and &#39;=&#39; because it can cause mutation. But just to be safe, we want to&quot;,&quot;  // reject all unexpected forms.&quot;,null,&quot;  // We split the first stage into 4 regexp operations in order to work around&quot;,&quot;  // crippling inefficiencies in IE&#39;s and Safari&#39;s regexp engines. First we&quot;,&quot;  // replace all backslash pairs with &#39;@&#39; (a non-JSON character). Second, we&quot;,&quot;  // replace all simple value tokens with &#39;]&#39; characters, but only when followed&quot;,&quot;  // by a colon, comma, closing bracket or end of string. Third, we delete all&quot;,&quot;  // open brackets that follow a colon or comma or that begin the text. Finally,&quot;,&quot;  // we look to see that the remaining characters are only whitespace or &#39;]&#39; or&quot;,&quot;  // &#39;,&#39; or &#39;:&#39; or &#39;{&#39; or &#39;}&#39;. If that is so, then the text is safe for eval.&quot;,null,&quot;  // Don&#39;t make these static since they have the global flag.&quot;,&quot;  var backslashesRe = /\\\\[\&quot;\\\\\\/bfnrtu]/g;&quot;,&quot;  var simpleValuesRe =&quot;,&quot;      /(?:\&quot;[^\&quot;\\\\\\n\\r\\u2028\\u2029\\x00-\\x08\\x0a-\\x1f]*\&quot;|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)[\\s\\u2028\\u2029]*(?=:|,|]|}|$)/g;&quot;,&quot;  var openBracketsRe = /(?:^|:|,)(?:[\\s\\u2028\\u2029]*\\[)+/g;&quot;,&quot;  var remainderRe = /^[\\],:{}\\s\\u2028\\u2029]*$/;&quot;,null,&quot;  return remainderRe.test(&quot;,&quot;      s.replace(backslashesRe, &#39;@&#39;)&quot;,&quot;          .replace(simpleValuesRe, &#39;]&#39;)&quot;,&quot;          .replace(openBracketsRe, &#39;&#39;));&quot;,&quot;};&quot;,null,&quot;/**&quot;,&quot; * Logs a parsing error in {@code JSON.parse} solvable by using {@code eval}&quot;,&quot; * if {@code goog.json.TRY_NATIVE_JSON} is enabled.&quot;,&quot; * @private {function(string, !Error)} The first parameter is the error message,&quot;,&quot; *     the second is the exception thrown by {@code JSON.parse}.&quot;,&quot; */&quot;,&quot;goog.json.errorLogger_ = goog.nullFunction;&quot;,null,null,&quot;/**&quot;,&quot; * Sets an error logger to use if there&#39;s a recoverable parsing error and {@code&quot;,&quot; * goog.json.TRY_NATIVE_JSON} is enabled.&quot;,&quot; * @param {function(string, !Error)} errorLogger The first parameter is the&quot;,&quot; *     error message, the second is the exception thrown by {@code JSON.parse}.&quot;,&quot; */&quot;,&quot;goog.json.setErrorLogger = function(errorLogger) {&quot;,&quot;  goog.json.errorLogger_ = errorLogger;&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Parses a JSON string and returns the result. This throws an exception if&quot;,&quot; * the string is an invalid JSON string.&quot;,&quot; *&quot;,&quot; * Note that this is very slow on large strings. Use JSON.parse if possible.&quot;,&quot; *&quot;,&quot; * @param {*} s The JSON string to parse.&quot;,&quot; * @throws Error if s is invalid JSON.&quot;,&quot; * @return {Object} The object generated from the JSON string, or null.&quot;,&quot; * @deprecated Use JSON.parse.&quot;,&quot; */&quot;,&quot;goog.json.parse = goog.json.USE_NATIVE_JSON ?&quot;,&quot;    /** @type {function(*):Object} */ (goog.global[&#39;JSON&#39;][&#39;parse&#39;]) :&quot;,&quot;    function(s) {&quot;,&quot;      var error;&quot;,&quot;      if (goog.json.TRY_NATIVE_JSON) {&quot;,&quot;        try {&quot;,&quot;          return goog.global[&#39;JSON&#39;][&#39;parse&#39;](s);&quot;,&quot;        } catch (ex) {&quot;,&quot;          error = ex;&quot;,&quot;        }&quot;,&quot;      }&quot;,&quot;      var o = String(s);&quot;,&quot;      if (goog.json.isValid(o)) {&quot;,null,&quot;        try {&quot;,&quot;          var result = /** @type {?Object} */ (eval(&#39;(&#39; + o + &#39;)&#39;));&quot;,&quot;          if (error) {&quot;,&quot;            goog.json.errorLogger_(&#39;Invalid JSON: &#39; + o, error);&quot;,&quot;          }&quot;,&quot;          return result;&quot;,&quot;        } catch (ex) {&quot;,&quot;        }&quot;,&quot;      }&quot;,&quot;      throw new Error(&#39;Invalid JSON string: &#39; + o);&quot;,&quot;    };&quot;,null,null,&quot;/**&quot;,&quot; * JSON replacer, as defined in Section 15.12.3 of the ES5 spec.&quot;,&quot; * @see http://ecma-international.org/ecma-262/5.1/#sec-15.12.3&quot;,&quot; *&quot;,&quot; * TODO(nicksantos): Array should also be a valid replacer.&quot;,&quot; *&quot;,&quot; * @typedef {function(this:Object, string, *): *}&quot;,&quot; */&quot;,&quot;goog.json.Replacer;&quot;,null,null,&quot;/**&quot;,&quot; * JSON reviver, as defined in Section 15.12.2 of the ES5 spec.&quot;,&quot; * @see http://ecma-international.org/ecma-262/5.1/#sec-15.12.3&quot;,&quot; *&quot;,&quot; * @typedef {function(this:Object, string, *): *}&quot;,&quot; */&quot;,&quot;goog.json.Reviver;&quot;,null,null,&quot;/**&quot;,&quot; * Serializes an object or a value to a JSON string.&quot;,&quot; *&quot;,&quot; * @param {*} object The object to serialize.&quot;,&quot; * @param {?goog.json.Replacer=} opt_replacer A replacer function&quot;,&quot; *     called for each (key, value) pair that determines how the value&quot;,&quot; *     should be serialized. By defult, this just returns the value&quot;,&quot; *     and allows default serialization to kick in.&quot;,&quot; * @throws Error if there are loops in the object graph.&quot;,&quot; * @return {string} A JSON string representation of the input.&quot;,&quot; */&quot;,&quot;goog.json.serialize = goog.json.USE_NATIVE_JSON ?&quot;,&quot;    /** @type {function(*, ?goog.json.Replacer=):string} */&quot;,&quot;    (goog.global[&#39;JSON&#39;][&#39;stringify&#39;]) :&quot;,&quot;    function(object, opt_replacer) {&quot;,&quot;      // NOTE(nicksantos): Currently, we never use JSON.stringify.&quot;,&quot;      //&quot;,&quot;      // The last time I evaluated this, JSON.stringify had subtle bugs and&quot;,&quot;      // behavior differences on all browsers, and the performance win was not&quot;,&quot;      // large enough to justify all the issues. This may change in the future&quot;,&quot;      // as browser implementations get better.&quot;,&quot;      //&quot;,&quot;      // assertSerialize in json_test contains if branches for the cases&quot;,&quot;      // that fail.&quot;,&quot;      return new goog.json.Serializer(opt_replacer).serialize(object);&quot;,&quot;    };&quot;,null,null,null,&quot;/**&quot;,&quot; * Class that is used to serialize JSON objects to a string.&quot;,&quot; * @param {?goog.json.Replacer=} opt_replacer Replacer.&quot;,&quot; * @constructor&quot;,&quot; */&quot;,&quot;goog.json.Serializer = function(opt_replacer) {&quot;,&quot;  /**&quot;,&quot;   * @type {goog.json.Replacer|null|undefined}&quot;,&quot;   * @private&quot;,&quot;   */&quot;,&quot;  this.replacer_ = opt_replacer;&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Serializes an object or a value to a JSON string.&quot;,&quot; *&quot;,&quot; * @param {*} object The object to serialize.&quot;,&quot; * @throws Error if there are loops in the object graph.&quot;,&quot; * @return {string} A JSON string representation of the input.&quot;,&quot; */&quot;,&quot;goog.json.Serializer.prototype.serialize = function(object) {&quot;,&quot;  var sb = [];&quot;,&quot;  this.serializeInternal(object, sb);&quot;,&quot;  return sb.join(&#39;&#39;);&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Serializes a generic value to a JSON string&quot;,&quot; * @protected&quot;,&quot; * @param {*} object The object to serialize.&quot;,&quot; * @param {Array&lt;string&gt;} sb Array used as a string builder.&quot;,&quot; * @throws Error if there are loops in the object graph.&quot;,&quot; */&quot;,&quot;goog.json.Serializer.prototype.serializeInternal = function(object, sb) {&quot;,&quot;  if (object == null) {&quot;,&quot;    // undefined == null so this branch covers undefined as well as null&quot;,&quot;    sb.push(&#39;null&#39;);&quot;,&quot;    return;&quot;,&quot;  }&quot;,null,&quot;  if (typeof object == &#39;object&#39;) {&quot;,&quot;    if (goog.isArray(object)) {&quot;,&quot;      this.serializeArray(object, sb);&quot;,&quot;      return;&quot;,&quot;    } else if (&quot;,&quot;        object instanceof String || object instanceof Number ||&quot;,&quot;        object instanceof Boolean) {&quot;,&quot;      object = object.valueOf();&quot;,&quot;      // Fall through to switch below.&quot;,&quot;    } else {&quot;,&quot;      this.serializeObject_(/** @type {!Object} */ (object), sb);&quot;,&quot;      return;&quot;,&quot;    }&quot;,&quot;  }&quot;,null,&quot;  switch (typeof object) {&quot;,&quot;    case &#39;string&#39;:&quot;,&quot;      this.serializeString_(object, sb);&quot;,&quot;      break;&quot;,&quot;    case &#39;number&#39;:&quot;,&quot;      this.serializeNumber_(object, sb);&quot;,&quot;      break;&quot;,&quot;    case &#39;boolean&#39;:&quot;,&quot;      sb.push(String(object));&quot;,&quot;      break;&quot;,&quot;    case &#39;function&#39;:&quot;,&quot;      sb.push(&#39;null&#39;);&quot;,&quot;      break;&quot;,&quot;    default:&quot;,&quot;      throw new Error(&#39;Unknown type: &#39; + typeof object);&quot;,&quot;  }&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Character mappings used internally for goog.string.quote&quot;,&quot; * @private&quot;,&quot; * @type {!Object}&quot;,&quot; */&quot;,&quot;goog.json.Serializer.charToJsonCharCache_ = {&quot;,&quot;  &#39;\\\&quot;&#39;: &#39;\\\\\&quot;&#39;,&quot;,&quot;  &#39;\\\\&#39;: &#39;\\\\\\\\&#39;,&quot;,&quot;  &#39;/&#39;: &#39;\\\\/&#39;,&quot;,&quot;  &#39;\\b&#39;: &#39;\\\\b&#39;,&quot;,&quot;  &#39;\\f&#39;: &#39;\\\\f&#39;,&quot;,&quot;  &#39;\\n&#39;: &#39;\\\\n&#39;,&quot;,&quot;  &#39;\\r&#39;: &#39;\\\\r&#39;,&quot;,&quot;  &#39;\\t&#39;: &#39;\\\\t&#39;,&quot;,null,&quot;  &#39;\\x0B&#39;: &#39;\\\\u000b&#39;  // &#39;\\v&#39; is not supported in JScript&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Regular expression used to match characters that need to be replaced.&quot;,&quot; * The S60 browser has a bug where unicode characters are not matched by&quot;,&quot; * regular expressions. The condition below detects such behaviour and&quot;,&quot; * adjusts the regular expression accordingly.&quot;,&quot; * @private&quot;,&quot; * @type {!RegExp}&quot;,&quot; */&quot;,&quot;goog.json.Serializer.charsToReplace_ = /\\uffff/.test(&#39;\\uffff&#39;) ?&quot;,&quot;    /[\\\\\\\&quot;\\x00-\\x1f\\x7f-\\uffff]/g :&quot;,&quot;    /[\\\\\\\&quot;\\x00-\\x1f\\x7f-\\xff]/g;&quot;,null,null,&quot;/**&quot;,&quot; * Serializes a string to a JSON string&quot;,&quot; * @private&quot;,&quot; * @param {string} s The string to serialize.&quot;,&quot; * @param {Array&lt;string&gt;} sb Array used as a string builder.&quot;,&quot; */&quot;,&quot;goog.json.Serializer.prototype.serializeString_ = function(s, sb) {&quot;,&quot;  // The official JSON implementation does not work with international&quot;,&quot;  // characters.&quot;,&quot;  sb.push(&#39;\&quot;&#39;, s.replace(goog.json.Serializer.charsToReplace_, function(c) {&quot;,&quot;    // caching the result improves performance by a factor 2-3&quot;,&quot;    var rv = goog.json.Serializer.charToJsonCharCache_[c];&quot;,&quot;    if (!rv) {&quot;,&quot;      rv = &#39;\\\\u&#39; + (c.charCodeAt(0) | 0x10000).toString(16).substr(1);&quot;,&quot;      goog.json.Serializer.charToJsonCharCache_[c] = rv;&quot;,&quot;    }&quot;,&quot;    return rv;&quot;,&quot;  }), &#39;\&quot;&#39;);&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Serializes a number to a JSON string&quot;,&quot; * @private&quot;,&quot; * @param {number} n The number to serialize.&quot;,&quot; * @param {Array&lt;string&gt;} sb Array used as a string builder.&quot;,&quot; */&quot;,&quot;goog.json.Serializer.prototype.serializeNumber_ = function(n, sb) {&quot;,&quot;  sb.push(isFinite(n) &amp;&amp; !isNaN(n) ? String(n) : &#39;null&#39;);&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Serializes an array to a JSON string&quot;,&quot; * @param {Array&lt;string&gt;} arr The array to serialize.&quot;,&quot; * @param {Array&lt;string&gt;} sb Array used as a string builder.&quot;,&quot; * @protected&quot;,&quot; */&quot;,&quot;goog.json.Serializer.prototype.serializeArray = function(arr, sb) {&quot;,&quot;  var l = arr.length;&quot;,&quot;  sb.push(&#39;[&#39;);&quot;,&quot;  var sep = &#39;&#39;;&quot;,&quot;  for (var i = 0; i &lt; l; i++) {&quot;,&quot;    sb.push(sep);&quot;,null,&quot;    var value = arr[i];&quot;,&quot;    this.serializeInternal(&quot;,&quot;        this.replacer_ ? this.replacer_.call(arr, String(i), value) : value,&quot;,&quot;        sb);&quot;,null,&quot;    sep = &#39;,&#39;;&quot;,&quot;  }&quot;,&quot;  sb.push(&#39;]&#39;);&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Serializes an object to a JSON string&quot;,&quot; * @private&quot;,&quot; * @param {!Object} obj The object to serialize.&quot;,&quot; * @param {Array&lt;string&gt;} sb Array used as a string builder.&quot;,&quot; */&quot;,&quot;goog.json.Serializer.prototype.serializeObject_ = function(obj, sb) {&quot;,&quot;  sb.push(&#39;{&#39;);&quot;,&quot;  var sep = &#39;&#39;;&quot;,&quot;  for (var key in obj) {&quot;,&quot;    if (Object.prototype.hasOwnProperty.call(obj, key)) {&quot;,&quot;      var value = obj[key];&quot;,&quot;      // Skip functions.&quot;,&quot;      if (typeof value != &#39;function&#39;) {&quot;,&quot;        sb.push(sep);&quot;,&quot;        this.serializeString_(key, sb);&quot;,&quot;        sb.push(&#39;:&#39;);&quot;,null,&quot;        this.serializeInternal(&quot;,&quot;            this.replacer_ ? this.replacer_.call(obj, key, value) : value, sb);&quot;,null,&quot;        sep = &#39;,&#39;;&quot;,&quot;      }&quot;,&quot;    }&quot;,&quot;  }&quot;,&quot;  sb.push(&#39;}&#39;);&quot;,&quot;};&quot;]]]"></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><script src="../../../../../../../../dossier.js" defer></script>