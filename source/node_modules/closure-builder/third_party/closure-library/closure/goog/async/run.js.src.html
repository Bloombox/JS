<!DOCTYPE html><html lang="en" class="loading"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>run.js</title><link href="../../../../../../../../dossier.css" rel="stylesheet" type="text/css"><script src="../../../../../../../../types.js" defer></script><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><nav class="dossier-nav"></nav><div class="content"><main data-page-data="[null,null,null,[&quot;run.js&quot;,&quot;node_modules/closure-builder/third_party/closure-library/closure/goog/async/run.js&quot;,[&quot;// Copyright 2013 The Closure Library Authors. All Rights Reserved.&quot;,&quot;//&quot;,&quot;// Licensed under the Apache License, Version 2.0 (the \&quot;License\&quot;);&quot;,&quot;// you may not use this file except in compliance with the License.&quot;,&quot;// You may obtain a copy of the License at&quot;,&quot;//&quot;,&quot;//      http://www.apache.org/licenses/LICENSE-2.0&quot;,&quot;//&quot;,&quot;// Unless required by applicable law or agreed to in writing, software&quot;,&quot;// distributed under the License is distributed on an \&quot;AS-IS\&quot; BASIS,&quot;,&quot;// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&quot;,&quot;// See the License for the specific language governing permissions and&quot;,&quot;// limitations under the License.&quot;,null,&quot;goog.provide(&#39;goog.async.run&#39;);&quot;,null,&quot;goog.require(&#39;goog.async.WorkQueue&#39;);&quot;,&quot;goog.require(&#39;goog.async.nextTick&#39;);&quot;,&quot;goog.require(&#39;goog.async.throwException&#39;);&quot;,null,null,&quot;/**&quot;,&quot; * Fires the provided callback just before the current callstack unwinds, or as&quot;,&quot; * soon as possible after the current JS execution context.&quot;,&quot; * @param {function(this:THIS)} callback&quot;,&quot; * @param {THIS=} opt_context Object to use as the \&quot;this value\&quot; when calling&quot;,&quot; *     the provided function.&quot;,&quot; * @template THIS&quot;,&quot; */&quot;,&quot;goog.async.run = function(callback, opt_context) {&quot;,&quot;  if (!goog.async.run.schedule_) {&quot;,&quot;    goog.async.run.initializeRunner_();&quot;,&quot;  }&quot;,&quot;  if (!goog.async.run.workQueueScheduled_) {&quot;,&quot;    // Nothing is currently scheduled, schedule it now.&quot;,&quot;    goog.async.run.schedule_();&quot;,&quot;    goog.async.run.workQueueScheduled_ = true;&quot;,&quot;  }&quot;,null,&quot;  goog.async.run.workQueue_.add(callback, opt_context);&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Initializes the function to use to process the work queue.&quot;,&quot; * @private&quot;,&quot; */&quot;,&quot;goog.async.run.initializeRunner_ = function() {&quot;,&quot;  // If native Promises are available in the browser, just schedule the callback&quot;,&quot;  // on a fulfilled promise, which is specified to be async, but as fast as&quot;,&quot;  // possible.  Use goog.global.Promise instead of just Promise because the&quot;,&quot;  // relevant externs may be missing, and don&#39;t alias it because this could&quot;,&quot;  // confuse the compiler into thinking the polyfill is required when it should&quot;,&quot;  // be treated as optional.&quot;,&quot;  if (String(goog.global.Promise).indexOf(&#39;[native code]&#39;) != -1) {&quot;,&quot;    var promise = goog.global.Promise.resolve(undefined);&quot;,&quot;    goog.async.run.schedule_ = function() {&quot;,&quot;      promise.then(goog.async.run.processWorkQueue);&quot;,&quot;    };&quot;,&quot;  } else {&quot;,&quot;    goog.async.run.schedule_ = function() {&quot;,&quot;      goog.async.nextTick(goog.async.run.processWorkQueue);&quot;,&quot;    };&quot;,&quot;  }&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Forces goog.async.run to use nextTick instead of Promise.&quot;,&quot; *&quot;,&quot; * This should only be done in unit tests. It&#39;s useful because MockClock&quot;,&quot; * replaces nextTick, but not the browser Promise implementation, so it allows&quot;,&quot; * Promise-based code to be tested with MockClock.&quot;,&quot; *&quot;,&quot; * However, we also want to run promises if the MockClock is no longer in&quot;,&quot; * control so we schedule a backup \&quot;setTimeout\&quot; to the unmocked timeout if&quot;,&quot; * provided.&quot;,&quot; *&quot;,&quot; * @param {function(function())=} opt_realSetTimeout&quot;,&quot; */&quot;,&quot;goog.async.run.forceNextTick = function(opt_realSetTimeout) {&quot;,&quot;  goog.async.run.schedule_ = function() {&quot;,&quot;    goog.async.nextTick(goog.async.run.processWorkQueue);&quot;,&quot;    if (opt_realSetTimeout) {&quot;,&quot;      opt_realSetTimeout(goog.async.run.processWorkQueue);&quot;,&quot;    }&quot;,&quot;  };&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * The function used to schedule work asynchronousely.&quot;,&quot; * @private {function()}&quot;,&quot; */&quot;,&quot;goog.async.run.schedule_;&quot;,null,null,&quot;/** @private {boolean} */&quot;,&quot;goog.async.run.workQueueScheduled_ = false;&quot;,null,null,&quot;/** @private {!goog.async.WorkQueue} */&quot;,&quot;goog.async.run.workQueue_ = new goog.async.WorkQueue();&quot;,null,null,&quot;if (goog.DEBUG) {&quot;,&quot;  /**&quot;,&quot;   * Reset the work queue. Only available for tests in debug mode.&quot;,&quot;   */&quot;,&quot;  goog.async.run.resetQueue = function() {&quot;,&quot;    goog.async.run.workQueueScheduled_ = false;&quot;,&quot;    goog.async.run.workQueue_ = new goog.async.WorkQueue();&quot;,&quot;  };&quot;,&quot;}&quot;,null,null,&quot;/**&quot;,&quot; * Run any pending goog.async.run work items. This function is not intended&quot;,&quot; * for general use, but for use by entry point handlers to run items ahead of&quot;,&quot; * goog.async.nextTick.&quot;,&quot; */&quot;,&quot;goog.async.run.processWorkQueue = function() {&quot;,&quot;  // NOTE: additional work queue items may be added while processing.&quot;,&quot;  var item = null;&quot;,&quot;  while (item = goog.async.run.workQueue_.remove()) {&quot;,&quot;    try {&quot;,&quot;      item.fn.call(item.scope);&quot;,&quot;    } catch (e) {&quot;,&quot;      goog.async.throwException(e);&quot;,&quot;    }&quot;,&quot;    goog.async.run.workQueue_.returnUnused(item);&quot;,&quot;  }&quot;,null,&quot;  // There are no more work items, allow processing to be scheduled again.&quot;,&quot;  goog.async.run.workQueueScheduled_ = false;&quot;,&quot;};&quot;]]]"></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><script src="../../../../../../../../dossier.js" defer></script>