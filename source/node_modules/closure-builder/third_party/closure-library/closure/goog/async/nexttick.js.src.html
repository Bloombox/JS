<!DOCTYPE html><html lang="en" class="loading"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>nexttick.js</title><link href="../../../../../../../../dossier.css" rel="stylesheet" type="text/css"><script src="../../../../../../../../types.js" defer></script><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><nav class="dossier-nav"></nav><div class="content"><main data-page-data="[null,null,null,[&quot;nexttick.js&quot;,&quot;node_modules/closure-builder/third_party/closure-library/closure/goog/async/nexttick.js&quot;,[&quot;// Copyright 2013 The Closure Library Authors. All Rights Reserved.&quot;,&quot;//&quot;,&quot;// Licensed under the Apache License, Version 2.0 (the \&quot;License\&quot;);&quot;,&quot;// you may not use this file except in compliance with the License.&quot;,&quot;// You may obtain a copy of the License at&quot;,&quot;//&quot;,&quot;//      http://www.apache.org/licenses/LICENSE-2.0&quot;,&quot;//&quot;,&quot;// Unless required by applicable law or agreed to in writing, software&quot;,&quot;// distributed under the License is distributed on an \&quot;AS-IS\&quot; BASIS,&quot;,&quot;// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&quot;,&quot;// See the License for the specific language governing permissions and&quot;,&quot;// limitations under the License.&quot;,null,&quot;/**&quot;,&quot; * @fileoverview Provides a function to schedule running a function as soon&quot;,&quot; * as possible after the current JS execution stops and yields to the event&quot;,&quot; * loop.&quot;,&quot; *&quot;,&quot; */&quot;,null,&quot;goog.provide(&#39;goog.async.nextTick&#39;);&quot;,&quot;goog.provide(&#39;goog.async.throwException&#39;);&quot;,null,&quot;goog.require(&#39;goog.debug.entryPointRegistry&#39;);&quot;,&quot;goog.require(&#39;goog.dom.TagName&#39;);&quot;,&quot;goog.require(&#39;goog.functions&#39;);&quot;,&quot;goog.require(&#39;goog.labs.userAgent.browser&#39;);&quot;,&quot;goog.require(&#39;goog.labs.userAgent.engine&#39;);&quot;,null,null,&quot;/**&quot;,&quot; * Throw an item without interrupting the current execution context.  For&quot;,&quot; * example, if processing a group of items in a loop, sometimes it is useful&quot;,&quot; * to report an error while still allowing the rest of the batch to be&quot;,&quot; * processed.&quot;,&quot; * @param {*} exception&quot;,&quot; */&quot;,&quot;goog.async.throwException = function(exception) {&quot;,&quot;  // Each throw needs to be in its own context.&quot;,&quot;  goog.global.setTimeout(function() { throw exception; }, 0);&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Fires the provided callbacks as soon as possible after the current JS&quot;,&quot; * execution context. setTimeout(…, 0) takes at least 4ms when called from&quot;,&quot; * within another setTimeout(…, 0) for legacy reasons.&quot;,&quot; *&quot;,&quot; * This will not schedule the callback as a microtask (i.e. a task that can&quot;,&quot; * preempt user input or networking callbacks). It is meant to emulate what&quot;,&quot; * setTimeout(_, 0) would do if it were not throttled. If you desire microtask&quot;,&quot; * behavior, use {@see goog.Promise} instead.&quot;,&quot; *&quot;,&quot; * @param {function(this:SCOPE)} callback Callback function to fire as soon as&quot;,&quot; *     possible.&quot;,&quot; * @param {SCOPE=} opt_context Object in whose scope to call the listener.&quot;,&quot; * @param {boolean=} opt_useSetImmediate Avoid the IE workaround that&quot;,&quot; *     ensures correctness at the cost of speed. See comments for details.&quot;,&quot; * @template SCOPE&quot;,&quot; */&quot;,&quot;goog.async.nextTick = function(callback, opt_context, opt_useSetImmediate) {&quot;,&quot;  var cb = callback;&quot;,&quot;  if (opt_context) {&quot;,&quot;    cb = goog.bind(callback, opt_context);&quot;,&quot;  }&quot;,&quot;  cb = goog.async.nextTick.wrapCallback_(cb);&quot;,&quot;  // Note we do allow callers to also request setImmediate if they are willing&quot;,&quot;  // to accept the possible tradeoffs of incorrectness in exchange for speed.&quot;,&quot;  // The IE fallback of readystate change is much slower. See useSetImmediate_&quot;,&quot;  // for details.&quot;,&quot;  if (goog.isFunction(goog.global.setImmediate) &amp;&amp;&quot;,&quot;      (opt_useSetImmediate || goog.async.nextTick.useSetImmediate_())) {&quot;,&quot;    goog.global.setImmediate(cb);&quot;,&quot;    return;&quot;,&quot;  }&quot;,null,&quot;  // Look for and cache the custom fallback version of setImmediate.&quot;,&quot;  if (!goog.async.nextTick.setImmediate_) {&quot;,&quot;    goog.async.nextTick.setImmediate_ =&quot;,&quot;        goog.async.nextTick.getSetImmediateEmulator_();&quot;,&quot;  }&quot;,&quot;  goog.async.nextTick.setImmediate_(cb);&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Returns whether should use setImmediate implementation currently on window.&quot;,&quot; *&quot;,&quot; * window.setImmediate was introduced and currently only supported by IE10+,&quot;,&quot; * but due to a bug in the implementation it is not guaranteed that&quot;,&quot; * setImmediate is faster than setTimeout nor that setImmediate N is before&quot;,&quot; * setImmediate N+1. That is why we do not use the native version if&quot;,&quot; * available. We do, however, call setImmediate if it is a non-native function&quot;,&quot; * because that indicates that it has been replaced by goog.testing.MockClock&quot;,&quot; * which we do want to support.&quot;,&quot; * See&quot;,&quot; * http://connect.microsoft.com/IE/feedback/details/801823/setimmediate-and-messagechannel-are-broken-in-ie10&quot;,&quot; *&quot;,&quot; * @return {boolean} Whether to use the implementation of setImmediate defined&quot;,&quot; *     on Window.&quot;,&quot; * @private&quot;,&quot; */&quot;,&quot;goog.async.nextTick.useSetImmediate_ = function() {&quot;,&quot;  // Not a browser environment.&quot;,&quot;  if (!goog.global.Window || !goog.global.Window.prototype) {&quot;,&quot;    return true;&quot;,&quot;  }&quot;,null,&quot;  // MS Edge has window.setImmediate natively, but it&#39;s not on Window.prototype.&quot;,&quot;  // Also, there&#39;s no clean way to detect if the goog.global.setImmediate has&quot;,&quot;  // been replaced by mockClock as its replacement also shows up as \&quot;[native&quot;,&quot;  // code]\&quot; when using toString. Therefore, just always use&quot;,&quot;  // goog.global.setImmediate for Edge. It&#39;s unclear if it suffers the same&quot;,&quot;  // issues as IE10/11, but based on&quot;,&quot;  // https://dev.modern.ie/testdrive/demos/setimmediatesorting/&quot;,&quot;  // it seems they&#39;ve been working to ensure it&#39;s WAI.&quot;,&quot;  if (goog.labs.userAgent.browser.isEdge() ||&quot;,&quot;      goog.global.Window.prototype.setImmediate != goog.global.setImmediate) {&quot;,&quot;    // Something redefined setImmediate in which case we decide to use it (This&quot;,&quot;    // is so that we use the mockClock setImmediate).&quot;,&quot;    return true;&quot;,&quot;  }&quot;,null,&quot;  return false;&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Cache for the setImmediate implementation.&quot;,&quot; * @type {function(function())}&quot;,&quot; * @private&quot;,&quot; */&quot;,&quot;goog.async.nextTick.setImmediate_;&quot;,null,null,&quot;/**&quot;,&quot; * Determines the best possible implementation to run a function as soon as&quot;,&quot; * the JS event loop is idle.&quot;,&quot; * @return {function(function())} The \&quot;setImmediate\&quot; implementation.&quot;,&quot; * @private&quot;,&quot; */&quot;,&quot;goog.async.nextTick.getSetImmediateEmulator_ = function() {&quot;,&quot;  // Create a private message channel and use it to postMessage empty messages&quot;,&quot;  // to ourselves.&quot;,&quot;  /** @type {!Function|undefined} */&quot;,&quot;  var Channel = goog.global[&#39;MessageChannel&#39;];&quot;,&quot;  // If MessageChannel is not available and we are in a browser, implement&quot;,&quot;  // an iframe based polyfill in browsers that have postMessage and&quot;,&quot;  // document.addEventListener. The latter excludes IE8 because it has a&quot;,&quot;  // synchronous postMessage implementation.&quot;,&quot;  if (typeof Channel === &#39;undefined&#39; &amp;&amp; typeof window !== &#39;undefined&#39; &amp;&amp;&quot;,&quot;      window.postMessage &amp;&amp; window.addEventListener &amp;&amp;&quot;,&quot;      // Presto (The old pre-blink Opera engine) has problems with iframes&quot;,&quot;      // and contentWindow.&quot;,&quot;      !goog.labs.userAgent.engine.isPresto()) {&quot;,&quot;    /** @constructor */&quot;,&quot;    Channel = function() {&quot;,&quot;      // Make an empty, invisible iframe.&quot;,&quot;      var iframe = /** @type {!HTMLIFrameElement} */ (&quot;,&quot;          document.createElement(String(goog.dom.TagName.IFRAME)));&quot;,&quot;      iframe.style.display = &#39;none&#39;;&quot;,&quot;      iframe.src = &#39;&#39;;&quot;,&quot;      document.documentElement.appendChild(iframe);&quot;,&quot;      var win = iframe.contentWindow;&quot;,&quot;      var doc = win.document;&quot;,&quot;      doc.open();&quot;,&quot;      doc.write(&#39;&#39;);&quot;,&quot;      doc.close();&quot;,&quot;      // Do not post anything sensitive over this channel, as the workaround for&quot;,&quot;      // pages with file: origin could allow that information to be modified or&quot;,&quot;      // intercepted.&quot;,&quot;      var message = &#39;callImmediate&#39; + Math.random();&quot;,&quot;      // The same origin policy rejects attempts to postMessage from file: urls&quot;,&quot;      // unless the origin is &#39;*&#39;.&quot;,&quot;      var origin = win.location.protocol == &#39;file:&#39; ?&quot;,&quot;          &#39;*&#39; :&quot;,&quot;          win.location.protocol + &#39;//&#39; + win.location.host;&quot;,&quot;      var onmessage = goog.bind(function(e) {&quot;,&quot;        // Validate origin and message to make sure that this message was&quot;,&quot;        // intended for us. If the origin is set to &#39;*&#39; (see above) only the&quot;,&quot;        // message needs to match since, for example, &#39;*&#39; != &#39;file://&#39;. Allowing&quot;,&quot;        // the wildcard is ok, as we are not concerned with security here.&quot;,&quot;        if ((origin != &#39;*&#39; &amp;&amp; e.origin != origin) || e.data != message) {&quot;,&quot;          return;&quot;,&quot;        }&quot;,&quot;        this[&#39;port1&#39;].onmessage();&quot;,&quot;      }, this);&quot;,&quot;      win.addEventListener(&#39;message&#39;, onmessage, false);&quot;,&quot;      this[&#39;port1&#39;] = {};&quot;,&quot;      this[&#39;port2&#39;] = {&quot;,&quot;        postMessage: function() { win.postMessage(message, origin); }&quot;,&quot;      };&quot;,&quot;    };&quot;,&quot;  }&quot;,&quot;  if (typeof Channel !== &#39;undefined&#39; &amp;&amp; !goog.labs.userAgent.browser.isIE()) {&quot;,&quot;    // Exclude all of IE due to&quot;,&quot;    // http://codeforhire.com/2013/09/21/setimmediate-and-messagechannel-broken-on-internet-explorer-10/&quot;,&quot;    // which allows starving postMessage with a busy setTimeout loop.&quot;,&quot;    // This currently affects IE10 and IE11 which would otherwise be able&quot;,&quot;    // to use the postMessage based fallbacks.&quot;,&quot;    var channel = new Channel();&quot;,&quot;    // Use a fifo linked list to call callbacks in the right order.&quot;,&quot;    var head = {};&quot;,&quot;    var tail = head;&quot;,&quot;    channel[&#39;port1&#39;].onmessage = function() {&quot;,&quot;      if (goog.isDef(head.next)) {&quot;,&quot;        head = head.next;&quot;,&quot;        var cb = head.cb;&quot;,&quot;        head.cb = null;&quot;,&quot;        cb();&quot;,&quot;      }&quot;,&quot;    };&quot;,&quot;    return function(cb) {&quot;,&quot;      tail.next = {cb: cb};&quot;,&quot;      tail = tail.next;&quot;,&quot;      channel[&#39;port2&#39;].postMessage(0);&quot;,&quot;    };&quot;,&quot;  }&quot;,&quot;  // Implementation for IE6 to IE10: Script elements fire an asynchronous&quot;,&quot;  // onreadystatechange event when inserted into the DOM.&quot;,&quot;  if (typeof document !== &#39;undefined&#39; &amp;&amp;&quot;,&quot;      &#39;onreadystatechange&#39; in&quot;,&quot;          document.createElement(String(goog.dom.TagName.SCRIPT))) {&quot;,&quot;    return function(cb) {&quot;,&quot;      var script = document.createElement(String(goog.dom.TagName.SCRIPT));&quot;,&quot;      script.onreadystatechange = function() {&quot;,&quot;        // Clean up and call the callback.&quot;,&quot;        script.onreadystatechange = null;&quot;,&quot;        script.parentNode.removeChild(script);&quot;,&quot;        script = null;&quot;,&quot;        cb();&quot;,&quot;        cb = null;&quot;,&quot;      };&quot;,&quot;      document.documentElement.appendChild(script);&quot;,&quot;    };&quot;,&quot;  }&quot;,&quot;  // Fall back to setTimeout with 0. In browsers this creates a delay of 5ms&quot;,&quot;  // or more.&quot;,&quot;  // NOTE(user): This fallback is used for IE11.&quot;,&quot;  return function(cb) {&quot;,&quot;    goog.global.setTimeout(/** @type {function()} */ (cb), 0);&quot;,&quot;  };&quot;,&quot;};&quot;,null,null,&quot;/**&quot;,&quot; * Helper function that is overrided to protect callbacks with entry point&quot;,&quot; * monitor if the application monitors entry points.&quot;,&quot; * @param {function()} callback Callback function to fire as soon as possible.&quot;,&quot; * @return {function()} The wrapped callback.&quot;,&quot; * @private&quot;,&quot; */&quot;,&quot;goog.async.nextTick.wrapCallback_ = goog.functions.identity;&quot;,null,null,&quot;// Register the callback function as an entry point, so that it can be&quot;,&quot;// monitored for exception handling, etc. This has to be done in this file&quot;,&quot;// since it requires special code to handle all browsers.&quot;,&quot;goog.debug.entryPointRegistry.register(&quot;,&quot;    /**&quot;,&quot;     * @param {function(!Function): !Function} transformer The transforming&quot;,&quot;     *     function.&quot;,&quot;     */&quot;,&quot;    function(transformer) { goog.async.nextTick.wrapCallback_ = transformer; });&quot;]]]"></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><script src="../../../../../../../../dossier.js" defer></script>